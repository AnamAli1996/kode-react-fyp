/**
 * Info item with disclosable feature
 * @class ApInfoDisclosableItem
 */
'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});

var _react = require('react');

var _react2 = _interopRequireDefault(_react);

var _classnames = require('classnames');

var _classnames2 = _interopRequireDefault(_classnames);

var _apemanReactMixinPure = require('apeman-react-mixin-pure');

var _apemanReactMixinLayout = require('apeman-react-mixin-layout');

var _ap_info_item = require('./ap_info_item');

var _ap_info_item2 = _interopRequireDefault(_ap_info_item);

var _apemanReactButton = require('apeman-react-button');

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var NEXT_ICON = _ap_info_item2.default.NEXT_ICON;
var PREV_ICON = _ap_info_item2.default.PREV_ICON;

/** @lends ApInfoDisclosableItem */

var ApInfoDisclosableItem = _react2.default.createClass({
  displayName: 'ApInfoDisclosableItem',

  // --------------------
  // Specs
  // --------------------

  propTypes: {
    label: _react.PropTypes.string,
    value: _react.PropTypes.string,
    unit: _react.PropTypes.string
  },

  mixins: [_apemanReactMixinPure.ApPureMixin, _apemanReactMixinLayout.ApLayoutMixin],

  getInitialState: function getInitialState() {
    return {
      open: false
    };
  },
  render: function render() {
    var s = this;
    var state = s.state;
    var props = s.props;
    var layouts = s.layouts;

    var className = (0, _classnames2.default)('ap-info-disclosable-item', props.className);
    return _react2.default.createElement(
      'div',
      { className: className },
      _react2.default.createElement(
        'div',
        { className: (0, _classnames2.default)('ap-info-disclosable-wrap', {
            'ap-info-disclosable-wrap-open': state.open
          }),
          style: state.open ? layouts.wrapOpen : layouts.wrapClosed
        },
        _react2.default.createElement(
          'div',
          { className: 'ap-info-disclosable-summary',
            ref: function ref(summary) {
              s.summary = summary;
            }
          },
          _react2.default.createElement(
            'div',
            { ref: function ref(summaryInner) {
                s.summaryInner = summaryInner;
              } },
            _react2.default.createElement(_ap_info_item2.default, { label: props.label,
              unit: props.unit,
              value: props.value,
              icon: NEXT_ICON,
              onTap: s.toggleDisclosable
            })
          )
        ),
        _react2.default.createElement(
          'div',
          { className: 'ap-info-disclosable-detail',
            ref: function ref(detail) {
              s.detail = detail;
            }
          },
          _react2.default.createElement(_apemanReactButton.ApIconButton, { className: 'ap-info-disclosable-back',
            icon: (0, _classnames2.default)('ap-info-item-icon ap-info-disclosable-back-icon', PREV_ICON),
            simple: true,
            onTap: s.toggleDisclosable
          }),
          _react2.default.createElement(
            'div',
            { className: 'ap-info-disclosable-detail-inner',
              ref: function ref(detailInner) {
                s.detailInner = detailInner;
              }
            },
            props.children
          )
        )
      )
    );
  },


  // --------------------
  // For ApLayoutMixin
  // --------------------

  getInitialLayouts: function getInitialLayouts() {
    return {
      wrapOpen: {
        height: 'auto'
      },
      wrapClosed: {
        height: 'auto'
      }
    };
  },
  calcLayouts: function calcLayouts() {
    var s = this;
    var summaryInner = s.summaryInner;
    var detailInner = s.detailInner;

    var summaryInnerRect = summaryInner && summaryInner.getBoundingClientRect();
    var detailInnerRect = detailInner && detailInner.getBoundingClientRect();
    return {
      wrapOpen: {
        height: detailInnerRect && detailInnerRect.height
      },
      wrapClosed: {
        height: summaryInnerRect && summaryInnerRect.height
      }
    };
  },


  // --------------------
  // Custom
  // --------------------
  toggleDisclosable: function toggleDisclosable() {
    var s = this;
    var state = s.state;

    s.setState({
      open: !state.open
    });
  }
});

exports.default = ApInfoDisclosableItem;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwX2luZm9fZGlzY2xvc2FibGVfaXRlbS5qc3giXSwibmFtZXMiOlsiTkVYVF9JQ09OIiwiUFJFVl9JQ09OIiwiQXBJbmZvRGlzY2xvc2FibGVJdGVtIiwiY3JlYXRlQ2xhc3MiLCJwcm9wVHlwZXMiLCJsYWJlbCIsInN0cmluZyIsInZhbHVlIiwidW5pdCIsIm1peGlucyIsImdldEluaXRpYWxTdGF0ZSIsIm9wZW4iLCJyZW5kZXIiLCJzIiwic3RhdGUiLCJwcm9wcyIsImxheW91dHMiLCJjbGFzc05hbWUiLCJ3cmFwT3BlbiIsIndyYXBDbG9zZWQiLCJzdW1tYXJ5Iiwic3VtbWFyeUlubmVyIiwidG9nZ2xlRGlzY2xvc2FibGUiLCJkZXRhaWwiLCJkZXRhaWxJbm5lciIsImNoaWxkcmVuIiwiZ2V0SW5pdGlhbExheW91dHMiLCJoZWlnaHQiLCJjYWxjTGF5b3V0cyIsInN1bW1hcnlJbm5lclJlY3QiLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJkZXRhaWxJbm5lclJlY3QiLCJzZXRTdGF0ZSJdLCJtYXBwaW5ncyI6IkFBQUE7Ozs7QUFJQTs7Ozs7O0FBRUE7Ozs7QUFDQTs7OztBQUNBOztBQUNBOztBQUNBOzs7O0FBQ0E7Ozs7SUFFUUEsUywwQkFBQUEsUztJQUFXQyxTLDBCQUFBQSxTOztBQUVuQjs7QUFDQSxJQUFNQyx3QkFBd0IsZ0JBQU1DLFdBQU4sQ0FBa0I7QUFBQTs7QUFDOUM7QUFDQTtBQUNBOztBQUVBQyxhQUFXO0FBQ1RDLFdBQU8saUJBQU1DLE1BREo7QUFFVEMsV0FBTyxpQkFBTUQsTUFGSjtBQUdURSxVQUFNLGlCQUFNRjtBQUhILEdBTG1DOztBQVc5Q0csVUFBUSwwRUFYc0M7O0FBZ0I5Q0MsaUJBaEI4Qyw2QkFnQjNCO0FBQ2pCLFdBQU87QUFDTEMsWUFBTTtBQURELEtBQVA7QUFHRCxHQXBCNkM7QUFzQjlDQyxRQXRCOEMsb0JBc0JwQztBQUNSLFFBQU1DLElBQUksSUFBVjtBQURRLFFBRUZDLEtBRkUsR0FFd0JELENBRnhCLENBRUZDLEtBRkU7QUFBQSxRQUVLQyxLQUZMLEdBRXdCRixDQUZ4QixDQUVLRSxLQUZMO0FBQUEsUUFFWUMsT0FGWixHQUV3QkgsQ0FGeEIsQ0FFWUcsT0FGWjs7QUFHUixRQUFJQyxZQUFZLDBCQUFXLDBCQUFYLEVBQXVDRixNQUFNRSxTQUE3QyxDQUFoQjtBQUNBLFdBQ0U7QUFBQTtBQUFBLFFBQUssV0FBWUEsU0FBakI7QUFDRTtBQUFBO0FBQUEsVUFBSyxXQUFZLDBCQUFXLDBCQUFYLEVBQXVDO0FBQ3RELDZDQUFpQ0gsTUFBTUg7QUFEZSxXQUF2QyxDQUFqQjtBQUdLLGlCQUFRRyxNQUFNSCxJQUFOLEdBQWFLLFFBQVFFLFFBQXJCLEdBQWdDRixRQUFRRztBQUhyRDtBQUtFO0FBQUE7QUFBQSxZQUFLLFdBQVUsNkJBQWY7QUFDSyxpQkFBTSxhQUFDQyxPQUFELEVBQWE7QUFBRVAsZ0JBQUVPLE9BQUYsR0FBWUEsT0FBWjtBQUFxQjtBQUQvQztBQUdFO0FBQUE7QUFBQSxjQUFLLEtBQU0sYUFBQ0MsWUFBRCxFQUFrQjtBQUFFUixrQkFBRVEsWUFBRixHQUFpQkEsWUFBakI7QUFBK0IsZUFBOUQ7QUFDRSxvRUFBWSxPQUFRTixNQUFNVixLQUExQjtBQUNZLG9CQUFPVSxNQUFNUCxJQUR6QjtBQUVZLHFCQUFRTyxNQUFNUixLQUYxQjtBQUdZLG9CQUFPUCxTQUhuQjtBQUlZLHFCQUFRYSxFQUFFUztBQUp0QjtBQURGO0FBSEYsU0FMRjtBQWlCRTtBQUFBO0FBQUEsWUFBSyxXQUFVLDRCQUFmO0FBQ0ssaUJBQU0sYUFBQ0MsTUFBRCxFQUFZO0FBQUVWLGdCQUFFVSxNQUFGLEdBQVdBLE1BQVg7QUFBbUI7QUFENUM7QUFHRSwyRUFBYyxXQUFVLDBCQUF4QjtBQUNjLGtCQUFPLDBCQUFXLGlEQUFYLEVBQThEdEIsU0FBOUQsQ0FEckI7QUFFYyx3QkFGZDtBQUdjLG1CQUFRWSxFQUFFUztBQUh4QixZQUhGO0FBUUU7QUFBQTtBQUFBLGNBQUssV0FBVSxrQ0FBZjtBQUNLLG1CQUFNLGFBQUNFLFdBQUQsRUFBaUI7QUFBRVgsa0JBQUVXLFdBQUYsR0FBZ0JBLFdBQWhCO0FBQTZCO0FBRDNEO0FBR0lULGtCQUFNVTtBQUhWO0FBUkY7QUFqQkY7QUFERixLQURGO0FBb0NELEdBOUQ2Qzs7O0FBZ0U5QztBQUNBO0FBQ0E7O0FBRUFDLG1CQXBFOEMsK0JBb0V6QjtBQUNuQixXQUFPO0FBQ0xSLGdCQUFVO0FBQ1JTLGdCQUFRO0FBREEsT0FETDtBQUlMUixrQkFBWTtBQUNWUSxnQkFBUTtBQURFO0FBSlAsS0FBUDtBQVFELEdBN0U2QztBQStFOUNDLGFBL0U4Qyx5QkErRS9CO0FBQ2IsUUFBTWYsSUFBSSxJQUFWO0FBRGEsUUFFUFEsWUFGTyxHQUV1QlIsQ0FGdkIsQ0FFUFEsWUFGTztBQUFBLFFBRU9HLFdBRlAsR0FFdUJYLENBRnZCLENBRU9XLFdBRlA7O0FBR2IsUUFBSUssbUJBQW1CUixnQkFBZ0JBLGFBQWFTLHFCQUFiLEVBQXZDO0FBQ0EsUUFBSUMsa0JBQWtCUCxlQUFlQSxZQUFZTSxxQkFBWixFQUFyQztBQUNBLFdBQU87QUFDTFosZ0JBQVU7QUFDUlMsZ0JBQVFJLG1CQUFtQkEsZ0JBQWdCSjtBQURuQyxPQURMO0FBSUxSLGtCQUFZO0FBQ1ZRLGdCQUFRRSxvQkFBb0JBLGlCQUFpQkY7QUFEbkM7QUFKUCxLQUFQO0FBUUQsR0E1RjZDOzs7QUE4RjlDO0FBQ0E7QUFDQTtBQUNBTCxtQkFqRzhDLCtCQWlHekI7QUFDbkIsUUFBTVQsSUFBSSxJQUFWO0FBRG1CLFFBRWJDLEtBRmEsR0FFSEQsQ0FGRyxDQUViQyxLQUZhOztBQUduQkQsTUFBRW1CLFFBQUYsQ0FBVztBQUNUckIsWUFBTSxDQUFDRyxNQUFNSDtBQURKLEtBQVg7QUFHRDtBQXZHNkMsQ0FBbEIsQ0FBOUI7O2tCQTBHZVQscUIiLCJmaWxlIjoiYXBfaW5mb19kaXNjbG9zYWJsZV9pdGVtLmpzeCIsInNvdXJjZVJvb3QiOiJsaWIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEluZm8gaXRlbSB3aXRoIGRpc2Nsb3NhYmxlIGZlYXR1cmVcbiAqIEBjbGFzcyBBcEluZm9EaXNjbG9zYWJsZUl0ZW1cbiAqL1xuJ3VzZSBzdHJpY3QnXG5cbmltcG9ydCBSZWFjdCwge1Byb3BUeXBlcyBhcyB0eXBlc30gZnJvbSAncmVhY3QnXG5pbXBvcnQgY2xhc3NuYW1lcyBmcm9tICdjbGFzc25hbWVzJ1xuaW1wb3J0IHtBcFB1cmVNaXhpbn0gZnJvbSAnYXBlbWFuLXJlYWN0LW1peGluLXB1cmUnXG5pbXBvcnQge0FwTGF5b3V0TWl4aW59IGZyb20gJ2FwZW1hbi1yZWFjdC1taXhpbi1sYXlvdXQnXG5pbXBvcnQgQXBJbmZvSXRlbSBmcm9tICcuL2FwX2luZm9faXRlbSdcbmltcG9ydCB7QXBJY29uQnV0dG9ufSBmcm9tICdhcGVtYW4tcmVhY3QtYnV0dG9uJ1xuXG5jb25zdCB7IE5FWFRfSUNPTiwgUFJFVl9JQ09OIH0gPSBBcEluZm9JdGVtXG5cbi8qKiBAbGVuZHMgQXBJbmZvRGlzY2xvc2FibGVJdGVtICovXG5jb25zdCBBcEluZm9EaXNjbG9zYWJsZUl0ZW0gPSBSZWFjdC5jcmVhdGVDbGFzcyh7XG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIFNwZWNzXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgcHJvcFR5cGVzOiB7XG4gICAgbGFiZWw6IHR5cGVzLnN0cmluZyxcbiAgICB2YWx1ZTogdHlwZXMuc3RyaW5nLFxuICAgIHVuaXQ6IHR5cGVzLnN0cmluZ1xuICB9LFxuXG4gIG1peGluczogW1xuICAgIEFwUHVyZU1peGluLFxuICAgIEFwTGF5b3V0TWl4aW5cbiAgXSxcblxuICBnZXRJbml0aWFsU3RhdGUgKCkge1xuICAgIHJldHVybiB7XG4gICAgICBvcGVuOiBmYWxzZVxuICAgIH1cbiAgfSxcblxuICByZW5kZXIgKCkge1xuICAgIGNvbnN0IHMgPSB0aGlzXG4gICAgbGV0IHsgc3RhdGUsIHByb3BzLCBsYXlvdXRzIH0gPSBzXG4gICAgbGV0IGNsYXNzTmFtZSA9IGNsYXNzbmFtZXMoJ2FwLWluZm8tZGlzY2xvc2FibGUtaXRlbScsIHByb3BzLmNsYXNzTmFtZSlcbiAgICByZXR1cm4gKFxuICAgICAgPGRpdiBjbGFzc05hbWU9eyBjbGFzc05hbWUgfT5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9eyBjbGFzc25hbWVzKCdhcC1pbmZvLWRpc2Nsb3NhYmxlLXdyYXAnLCB7XG4gICAgICAgICAgJ2FwLWluZm8tZGlzY2xvc2FibGUtd3JhcC1vcGVuJzogc3RhdGUub3BlblxuICAgICAgICB9KSB9XG4gICAgICAgICAgICAgc3R5bGU9eyBzdGF0ZS5vcGVuID8gbGF5b3V0cy53cmFwT3BlbiA6IGxheW91dHMud3JhcENsb3NlZCB9XG4gICAgICAgID5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYXAtaW5mby1kaXNjbG9zYWJsZS1zdW1tYXJ5J1xuICAgICAgICAgICAgICAgcmVmPXsgKHN1bW1hcnkpID0+IHsgcy5zdW1tYXJ5ID0gc3VtbWFyeSB9IH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICA8ZGl2IHJlZj17IChzdW1tYXJ5SW5uZXIpID0+IHsgcy5zdW1tYXJ5SW5uZXIgPSBzdW1tYXJ5SW5uZXIgfSB9PlxuICAgICAgICAgICAgICA8QXBJbmZvSXRlbSBsYWJlbD17IHByb3BzLmxhYmVsIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pdD17IHByb3BzLnVuaXQgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZT17IHByb3BzLnZhbHVlIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgaWNvbj17IE5FWFRfSUNPTiB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIG9uVGFwPXsgcy50b2dnbGVEaXNjbG9zYWJsZSB9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYXAtaW5mby1kaXNjbG9zYWJsZS1kZXRhaWwnXG4gICAgICAgICAgICAgICByZWY9eyAoZGV0YWlsKSA9PiB7IHMuZGV0YWlsID0gZGV0YWlsIH0gfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxBcEljb25CdXR0b24gY2xhc3NOYW1lPSdhcC1pbmZvLWRpc2Nsb3NhYmxlLWJhY2snXG4gICAgICAgICAgICAgICAgICAgICAgICAgIGljb249eyBjbGFzc25hbWVzKCdhcC1pbmZvLWl0ZW0taWNvbiBhcC1pbmZvLWRpc2Nsb3NhYmxlLWJhY2staWNvbicsIFBSRVZfSUNPTikgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICBzaW1wbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgb25UYXA9eyBzLnRvZ2dsZURpc2Nsb3NhYmxlIH1cbiAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYXAtaW5mby1kaXNjbG9zYWJsZS1kZXRhaWwtaW5uZXInXG4gICAgICAgICAgICAgICAgIHJlZj17IChkZXRhaWxJbm5lcikgPT4geyBzLmRldGFpbElubmVyID0gZGV0YWlsSW5uZXIgfSB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHsgcHJvcHMuY2hpbGRyZW4gfVxuICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9kaXY+XG4gICAgKVxuICB9LFxuXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIC8vIEZvciBBcExheW91dE1peGluXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG5cbiAgZ2V0SW5pdGlhbExheW91dHMgKCkge1xuICAgIHJldHVybiB7XG4gICAgICB3cmFwT3Blbjoge1xuICAgICAgICBoZWlnaHQ6ICdhdXRvJ1xuICAgICAgfSxcbiAgICAgIHdyYXBDbG9zZWQ6IHtcbiAgICAgICAgaGVpZ2h0OiAnYXV0bydcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgY2FsY0xheW91dHMgKCkge1xuICAgIGNvbnN0IHMgPSB0aGlzXG4gICAgbGV0IHsgc3VtbWFyeUlubmVyLCBkZXRhaWxJbm5lciB9ID0gc1xuICAgIGxldCBzdW1tYXJ5SW5uZXJSZWN0ID0gc3VtbWFyeUlubmVyICYmIHN1bW1hcnlJbm5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIGxldCBkZXRhaWxJbm5lclJlY3QgPSBkZXRhaWxJbm5lciAmJiBkZXRhaWxJbm5lci5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKVxuICAgIHJldHVybiB7XG4gICAgICB3cmFwT3Blbjoge1xuICAgICAgICBoZWlnaHQ6IGRldGFpbElubmVyUmVjdCAmJiBkZXRhaWxJbm5lclJlY3QuaGVpZ2h0XG4gICAgICB9LFxuICAgICAgd3JhcENsb3NlZDoge1xuICAgICAgICBoZWlnaHQ6IHN1bW1hcnlJbm5lclJlY3QgJiYgc3VtbWFyeUlubmVyUmVjdC5oZWlnaHRcbiAgICAgIH1cbiAgICB9XG4gIH0sXG5cbiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS1cbiAgLy8gQ3VzdG9tXG4gIC8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tXG4gIHRvZ2dsZURpc2Nsb3NhYmxlICgpIHtcbiAgICBjb25zdCBzID0gdGhpc1xuICAgIGxldCB7IHN0YXRlIH0gPSBzXG4gICAgcy5zZXRTdGF0ZSh7XG4gICAgICBvcGVuOiAhc3RhdGUub3BlblxuICAgIH0pXG4gIH1cbn0pXG5cbmV4cG9ydCBkZWZhdWx0IEFwSW5mb0Rpc2Nsb3NhYmxlSXRlbVxuIl19