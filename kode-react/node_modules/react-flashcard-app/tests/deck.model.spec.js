import { expect } from 'chai';
import { describe, it } from 'mocha';
import Deck from '../src/models/deck';

describe('deck model', () => {
  it('returns index by id', () => {
    const data = {
      id: 1,
      name: 'Deck 1',
      cards: [
        'roo', 'faa', 'boo', 'far', 'foo', 'bar',
      ],
    };
    const deck = new Deck(data);
    expect(
      deck.indexById(deck.cards[deck.cards.length - 1].id),
    ).eql(2);
  });

  it('returns the next not removed', () => {
    const data = {
      id: 1,
      name: 'Deck 1',
      cards: [
        'roo', 'faa', 'boo', 'far', 'foo', 'bar',
      ],
    };
    const removed = [1];
    const deck = new Deck(data);
    expect(
      deck.getNext(0, removed),
    ).eql(2);
  });

  it('returns -1 if all cards are removed', () => {
    const data = {
      id: 1,
      name: 'Deck 1',
      cards: [
        { id: 0, values: ['foo', 'bar'] },
        { id: 1, values: ['boo', 'far'] },
        { id: 2, values: ['roo', 'faa'] },
      ],
    };
    const removed = [0, 1, 2];
    const deck = new Deck(data);
    expect(
      deck.getNext(0, removed),
    ).eql(-1);
  });
});
